<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>104.3 MYFM</title>
<style>
body { background:#111; color:white; font-family:sans-serif; text-align:center; }
img { width:250px; border-radius:20px; margin-top:20px; }
</style>
</head>
<body>

<h2>ðŸŽµ 104.3 MYFM</h2>

<img id="cover">
<h3 id="title">Loading...</h3>
<p id="artist"></p>

<audio controls autoplay style="width:90%;">
<source src="https://stream.revma.ihrhls.com/zc173/hls.m3u8" type="application/x-mpegURL">
</audio>

<script>

const API_URL =
"https://webapi.radioedit.iheart.com/graphql?operationName=GetCurrentlyPlayingSongs&variables=%7B%22slug%22%3A%22kbig-fm%22%2C%22paging%22%3A%7B%22take%22%3A1%7D%7D&extensions=%7B%22persistedQuery%22%3A%7B%22version%22%3A1%2C%22sha256Hash%22%3A%22386763c17145056713327cddec890cd9d4fea7558efc56d09b7cd4167eef6060%22%7D%7D";

async function fetchTrack() {
    try {
        const res = await fetch(API_URL + "&t=" + Date.now());
        const json = await res.json();

        const track = json.data.sites.find.stream.amp.currentlyPlaying.tracks[0];

        if (!track) return;

        document.getElementById("title").innerText = track.title;
        document.getElementById("artist").innerText = track.artist.artistName;

        let img = track.imagePath || "";
        img = img.replace("http://","https://");

        document.getElementById("cover").src = img;

    } catch(e) {
        console.log("Error:", e);
    }
}

fetchTrack();
setInterval(fetchTrack, 10000);

</script>

</body>
</html>
